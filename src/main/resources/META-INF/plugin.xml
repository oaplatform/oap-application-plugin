<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin require-restart="false">
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>oap</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html#plugin-name -->
    <name>Oap</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor url="https://www.oaplatform.org">OAP</vendor>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>

    <depends config-file="oap-java.xml">com.intellij.modules.java</depends>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <fileType implementationClass="oap.application.plugin.lang.OapFileType"
                  name="OAP" language="OAP" extensions="oap"/>

        <lang.psiStructureViewFactory language="OAP"
                                      implementationClass="oap.application.plugin.structure.OapStructureViewFactory"/>
        <lang.formatter language="OAP"
                        implementationClass="oap.application.plugin.formatter.OapFormattingModelBuilder"/>

        <lang.syntaxHighlighterFactory language="OAP"
                                       implementationClass="oap.application.plugin.highlight.OapSyntaxHighlighterFactory"/>
        <annotator language="OAP"
                   implementationClass="oap.application.plugin.highlight.OapSyntaxHighlightingAnnotator"/>
        <additionalTextAttributes scheme="Default" file="colorSchemes/OapDefault.xml"/>
        <colorSettingsPage implementation="oap.application.plugin.highlight.OapColorSettingsPage"/>

        <langCodeStyleSettingsProvider implementation="oap.application.plugin.codestyle.OapLanguageCodeStyleSettingsProvider"/>
        <codeStyleSettingsProvider implementation="oap.application.plugin.codestyle.OapCodeStyleSettingsProvider"/>

        <lang.parserDefinition language="OAP"
                               implementationClass="oap.application.plugin.parser.OapParserDefinition"/>
        <lang.braceMatcher language="OAP" implementationClass="oap.application.plugin.misc.OapBraceMatcher"/>
        <lang.foldingBuilder language="OAP" implementationClass="oap.application.plugin.misc.OapFoldingBuilder"/>
        <!--        <quoteHandler fileType="OAP" className="org.jetbrains.plugins.oap.editor.OapQuoteHandler"/>-->

        <completion.contributor language="OAP" implementationClass="oap.application.plugin.completion.OapReferenceCompletionContributor" order="first"/>
        <completion.contributor language="OAP" implementationClass="oap.application.plugin.completion.OapKeywordCompletionContributor" order="last"/>
        <psi.referenceContributor implementation="oap.application.plugin.ref.OapReferenceContributor" language="OAP"/>
        <psi.referenceContributor
                language="OAP"
                implementation="oap.application.plugin.ref.OapJavaReferenceContributor"/>

        <lang.elementManipulator forClass="oap.application.plugin.gen.psi.OapClassNamePsi"
                                 implementationClass="oap.application.plugin.manipulators.OapValueManipulator"/>
        <lang.elementManipulator forClass="oap.application.plugin.psi.IModuleName"
                                 implementationClass="oap.application.plugin.manipulators.OapModuleNameManipulator"/>
        <lang.elementManipulator forClass="oap.application.plugin.psi.IServiceName"
                                 implementationClass="oap.application.plugin.manipulators.OapServiceNameManipulator"/>
        <lang.elementManipulator forClass="oap.application.plugin.gen.psi.OapParameterKeyValueFirstId"
                                 implementationClass="oap.application.plugin.manipulators.OapParameterKeyValueFirstIdManipulator"/>


        <breadcrumbsInfoProvider implementation="oap.application.plugin.misc.OapBreadcrumbsInfoProvider"/>

        <codeInsight.lineMarkerProvider language="OAP" implementationClass="oap.application.plugin.editor.OapServiceLineMarkerProvider" />
        <codeInsight.lineMarkerProvider language="JAVA" implementationClass="oap.application.plugin.editor.JavaOapServiceLineMarkerProvider" />

        <localInspection language="OAP"
                         implementationClass="oap.application.plugin.ref.ValidClassNameInspection"
                         displayName="Required valid class name" groupName="OAP" enabledByDefault="true"
                         level="ERROR"/>

        <localInspection language="OAP"
                         implementationClass="oap.application.plugin.ref.ValidModuleDependsOnInspection"
                         displayName="Required valid module name" groupName="OAP" enabledByDefault="true"
                         level="ERROR"/>

        <localInspection language="OAP"
                         implementationClass="oap.application.plugin.ref.ValidServiceDependsOnInspection"
                         displayName="Required valid module name" groupName="OAP" enabledByDefault="true"
                         level="ERROR"/>

        <localInspection language="OAP"
                         implementationClass="oap.application.plugin.ref.ValidReferenceModuleServiceInspection"
                         displayName="Required valid module name" groupName="OAP" enabledByDefault="true"
                         level="ERROR"/>

        <localInspection language="OAP"
                         implementationClass="oap.application.plugin.ref.ValidParametersInspection"
                         displayName="Required valid parameter name" groupName="OAP" enabledByDefault="true"
                         level="ERROR"/>

        <!-- index -->
        <stubIndex implementation="oap.application.plugin.stub.OapModuleNameIndex"/>
        <stubIndex implementation="oap.application.plugin.stub.OapModuleServicesServiceIndex"/>
    </extensions>
</idea-plugin>